var user={onReady:function(){user.imageUploader(),user.removeImage(),user.onKeyUp(),user.removeButton()},imageUploader:function(){var e;jQuery(".upload-image").on("click",function(t){t.preventDefault();var a=jQuery(this),r=jQuery(this).parent(),u=jQuery(this).attr("data-input"),n=jQuery("#"+u);e=wp.media.frames.meta_image_frame=wp.media({title:meta_image.title,button:{text:meta_image.button},library:{type:"image, video"},multiple:!1}),e.open(),e.on("select",function(){var t=e.state().get("selection").first().toJSON();a.remove(),r.css("background-image","url("+t.url+")"),n.val(t.url),r.append('<button class="remove-image button" data-input="'+u+'">X</button>'),user.saveImage(u,t.url),e.close()})})},saveImage:function(e,t){jQuery.ajax({url:ajaxurl,type:"GET",data:{imageField:e,fieldVal:t,action:"setImage"},dataType:"html",success:function(){user.removeImage()},error:function(e,t,a){window.alert(e+" :: "+t+" :: "+a)}})},removeImage:function(){jQuery(".remove-image").click(function(e){e.preventDefault();var t=jQuery(this).attr("data-input"),a=jQuery(this).attr("data-img");jQuery(this).parent().css("background-image",""),jQuery(this).parent().find("input").val(""),jQuery(this).parent().append('<button class="upload-image button button-large button-primary" style="text-align:center;" data-img="'+a+'" data-input="'+t+'">Upload/Set Banner</button>'),jQuery(this).remove(),user.imageUploader(),user.saveImage(t,"")})},onKeyUp:function(){jQuery(".text input").on("keyup",function(){var e=jQuery(this).val(),t=jQuery(this).attr("id"),a=jQuery(this).attr("data-element");jQuery.ajax({url:ajaxurl,type:"GET",data:{inputVal:e,input:t,action:"setCopy"},dataType:"html",success:function(e){jQuery("."+a).html(e)}})})},removeURL:function(e){jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"VideoRemove",postID:e},dataType:"html",success:function(e){jQuery("#video iframe").remove(),jQuery(".remove-btn").remove(),jQuery("#video_link").attr("type","text")},error:function(e,t,a){window.alert(e+" :: "+t+" :: "+a)}})},removeButton:function(){jQuery(".remove-btn").click(function(e){e.preventDefault(),jQuery("#video_link").val("");var t=jQuery(this).attr("data-post");user.removeURL(t)})}};jQuery(document).ready(function(){user.onReady()});